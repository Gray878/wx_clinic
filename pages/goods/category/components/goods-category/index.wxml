<view class="goods-category custom-class">
  <c-sidebar custom-class="custom-sidebar" bindchange="onParentChange" activeKey="{{activeKey}}">
    <c-sidebar-item wx:for="{{ category }}" wx:key="index" title="{{ item.name }}" />
  </c-sidebar>
  <view class="goods-category__right">
    <c-tabbar wx:if="{{isSlotRight}}" activeKey="{{subActiveKey}}" bindchange="onChildChange" showMore>
      <slot />
    </c-tabbar>
    <view wx:if="{{!isSlotRight}}" class="goods-category-normal">
      <view class="goods-category-normal-item" wx:if="{{category[activeKey].child_cate && category[activeKey].child_cate.length > 0}}">
        <view class="goods-category-normal-item-second-container" wx:if="{{level === 2}}">
          <block wx:for="{{category[activeKey].child_cate}}" wx:key="index">
            <view class="goods-category-normal-item-second-container-item" wx:for-key="index" bindtap="changCategory" data-item="{{item}}">
              <t-image src="{{item.image}}" t-class="image" />
              <view class="flex goods-category-normal-item-container-item-title">
                {{item.name}}
              </view>
            </view>
          </block>
        </view>
      </view>
      <view class="goods-category-normal-item" wx:else>
        <view class="no-child-cate-tip">当前显示"{{category[activeKey].name}}"的服务列表</view>
        <view class="goods-list">
          <view 
            class="goods-card" 
            wx:for="{{spuList}}" 
            wx:key="index" 
            bindtap="onTapSpu" 
            data-spu="{{item}}"
          >
            <view class="goods-card-image">
              <t-image 
                src="{{item.swiper_images && item.swiper_images.length > 0 ? item.swiper_images[0] : ''}}" 
                t-class="spu-image" 
                mode="aspectFill"
              />
            </view>
            <view class="goods-card-info">
              <view class="goods-card-title">{{item.name}}</view>
              <view class="order-button" catchtap="onTapOrder" data-spu="{{item}}">立即下单</view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>